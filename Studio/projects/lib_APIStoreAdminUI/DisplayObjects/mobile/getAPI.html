<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="refresh" content="0; url=app.html">
	</head>
	<body>
		<div data-role="page" class="nd2-no-menu-swipe">
			<nd2-include data-src="fragments/header.getAPI.html"></nd2-include>
			<nd2-include data-src="fragments/panel.left.html"></nd2-include>

			<div data-role="content" class="obj-overview">
				<div data-role="nd2tab" data-tab="overview">
					<h2>API Overview</h2>

					<table	data-c8o-listen="lib_APIStore.Admin_getAPI, lib_APIStore.Admin_putAPI"
							data-role="table"
							class="ui-responsive table-stroke no-heading">
						<thead><tr><!-- JQM requires at least one row in the head --></tr></thead>
						<tbody>
							<tr>
								<th>Name</th>
								<td>__=api > name__</td>
							</tr>
							<tr>
								<th>Convertigo Project</th>
								<td>__=api > project__</td>
							</tr>
							<tr>
								<th>Version</th>
								<td>__=api > version__</td>
							</tr>
							<tr>
								<th>Description</th>
								<td>__=api > description__</td>
							</tr>
							<tr>
								<th>Tags</th>
								<td>
									<ul data-c8o-each="api > tags > item">
										<li>__=.__</li>
									</ul>
								</td>
							</tr>
							<tr data-c8o-listen="lib_APIStore.Admin_toggleAPIIsPublished">
								<th>Is Published</th>
								<td>__=api > is_published__</td>
							</tr>
							<tr>
								<th>Configuration</th>
								<td><a	data-c8o-call="lib_APIStore.Admin_getConfig"
										data-c8o-variables='{"_id": "__=api > config_id__"}'>__=config > name__</a></td>
							</tr>
							<tr>
								<th>EndPoints</th>
								<td>
									<ul data-c8o-each="endpoints > item">
										<li><a	data-c8o-call="lib_APIStore.Admin_getEndPoint"
												data-c8o-variables='{"_id": "__=_id__"}'>__=name__</a>
										</li>
									</ul>
								</td>
							</tr>
						</tbody>
					</table>

					<div	class="box swagger-ui"
							data-role="collapsible"
							data-collapsed-icon="carat-r" data-expanded-icon="carat-d">
						<h2>Swagger UI</h2>
						<iframe frameBorder="0" seamless></iframe>
					</div>

					<div class="row end-xs">
						<div class="col-xs col-md-3">
							<div	data-c8o-listen="lib_APIStore.Admin_getAPI, lib_APIStore.Admin_putAPI, lib_APIStore.Admin_toggleAPIIsPublished"
									data-c8o-listen-condition="> :not(error)"
									class="box">
									<button	data-c8o-if="is_published:contains(true)"
											data-c8o-call="lib_APIStore.Admin_toggleAPIIsPublished"
											data-c8o-variables='{"_id": "__=api > _id__"}'>Unpublish from Store</button>
									<button	data-c8o-if-not="is_published:contains(true)"
											data-c8o-call="lib_APIStore.Admin_toggleAPIIsPublished"
											data-c8o-variables='{"_id": "__=api > _id__"}'>Publish to Store</button>
							</div>
						</div>
					</div>

					<span data-c8o-listen="lib_APIStore.Admin_getAPI, lib_APIStore.Admin_putAPI">
						<button	class="	clr-primary
	 									ui-btn ui-btn-raised
	 									ui-btn-fab ui-btn-fab-bottom
	 									waves-effect waves-button"
								data-c8o-call="lib_APIStore.Admin_getDataForPutAPI"
								data-c8o-variables='{"_id": "__=api > _id__"}'>
							<i class="zmdi zmdi-edit zmdi-hc-2x"></i>
						</button>
					</span>
				</div>

				<div data-role="nd2tab" data-tab="history">
					<h2>API History</h2>

					<span	data-c8o-listen="lib_APIStore.Admin_getAPI, lib_APIStore.Admin_putAPI, lib_APIStore.Admin_toggleAPIIsPublished"
							data-c8o-each="events > item">
						<div class="nd2-card">
							<div class="card-title">
								<h3 class="card-primary-title">__=user > name__ __=event_type__ed the API</h3>
								<h5 class="card-subtitle">__=date__</h5>
							</div>
						</div>
					</span>
				</div>
			</div>

			<nd2-include data-src="fragments/footer.html"></nd2-include>
		</div>
	</body>
</html>
