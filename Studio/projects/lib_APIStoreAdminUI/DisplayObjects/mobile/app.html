<!DOCTYPE HTML>
<html>
	<head>
		<title>API Store - Convertigo</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<!--
			Material Design CSS from nativedroid2
			see : see http://nativedroid.godesign.ch
		-->
		<link rel="stylesheet" href="css/font-awesome.min.css"/>
		<link rel="stylesheet" href="../../../../css/jquery.mobile.min.css"/>
		<link rel="stylesheet" href="vendor/waves/waves.min.css"/>
		<link rel="stylesheet" href="vendor/wow/animate.css"/>
		<link rel="stylesheet" href="css/nativedroid2.css"/>


		<!--
			Local project custom css
			===================================
			custom.css will hold all your custom CSS styles
		-->
		<link href="css/custom.css" rel="stylesheet"/>

		<meta name="mobile-web-app-capable" content="yes">
	 	<meta name="apple-mobile-web-app-capable" content="yes"/>
    	<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    	<!-- disable highlight in windows phone device -->
		<meta name="msapplication-tap-highlight" content="no"/>

		<!-- Hide pages while loading -->
		<style type="text/css">
		div[data-role=page]:not(.ui-page-active) {
			display: none;
		}
		</style>
	</head>

	<body data-c8o-call="lib_APIStore.Common_initDB" data-c8o-call-mode="auto">
		<div data-role="page" id="home" class="ui-responsive-panel">
			<nd2-include data-src="fragments/header.html"></nd2-include>
			<nd2-include data-src="fragments/panel.left.html"></nd2-include>

			<div data-role="content" class="ui-content">
 				<div class="row">
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a	data-c8o-call="lib_APIStore.Admin_getAPIs"
							class="box ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-swap"></i></div>
							<div class="card-action nd2-headline">APIs</div>
						</a>
				   	</div>
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a	data-c8o-call="lib_APIStore.Admin_getConfigs"
							class="box ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-settings"></i></div>
							<div class="card-action nd2-headline">Configurations</div>
						</a>
				   	</div>
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a	data-c8o-call="lib_APIStore.Admin_getEndPoints"
							class="box ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-globe-alt"></i></div>
							<div class="card-action nd2-headline">EndPoints</div>
						</a>
				   	</div>
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a	data-c8o-call="lib_APIStore.Admin_getUsers"
							class="box ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-accounts"></i></div>
							<div class="card-action nd2-headline">Users</div>
						</a>
				   	</div>
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a	data-c8o-call="lib_APIStore.Admin_getDataForPutStoreSettings"
							class="box ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-power"></i></div>
							<div class="card-action nd2-headline">Store Settings</div>
						</a>
				   	</div>
				    <div class="col-xs-12 col-sm-4 col-md-3">
						<a class="box ui-disabled ui-btn ui-btn-inline nd2-card home-naviguation-card">
							<div class="card-media"><i class="zmdi zmdi-trending-up"></i></div>
							<div class="card-action nd2-headline">Store Statistics</div>
						</a>
				   	</div>
				</div>
			</div>

			<nd2-include data-src="fragments/footer.html"></nd2-include>
		</div>

		<div data-role="page" id="login" data-dialog="true" data-close-btn="none" data-c8o-call="lib_APIStore.Admin_getSession" data-c8o-call-mode="auto">
			<div data-role="header">
				<h1>Login</h1>
			</div>

			<div data-role="content" class="ui-content">
				<form data-c8o-call="lib_APIStore.Admin_login">
					<label for="email" class="ui-hidden-accessible">Email:</label>
					<!-- The type is text, because the default admin email is "admin", which doesn't pass validation. -->
					<input type="text" id="email" name="email" placeholder="Email" required>
	
					<label for="password" class="ui-hidden-accessible">Password:</label>
					<input type="password" id="password" name="password" placeholder="Password" required>
	
					<input type="submit" value="Login">
				</form>
			</div>
		</div>

		<div data-role="page" id="deleteAPIConfirmation" data-dialog="true">
			<div data-role="header">
				<h1>Delete API</h1>
			</div>

			<div data-role="content" class="ui-content">
				<p>Deleting an API cannot be undone. This will also cancel all user subscriptions.</p>
				<p>Are you sure?</p>

				<form data-c8o-call="lib_APIStore.Admin_deleteAPI" data-c8o-listen="lib_APIStore.Admin_deleteAPI">
					<input type="hidden" name="confirmed" value="true">
					<input type="hidden" name="_id" value="__=api > _id__">

					<input type="submit" value="Delete API">
				</form>
			</div>
		</div>

		<div data-role="page" id="deleteConfigConfirmation" data-dialog="true">
			<div data-role="header">
				<h1>Delete Configuration</h1>
			</div>

			<div data-role="content" class="ui-content">
				<p>Deleting a configuration cannot be undone. This will also delete all APIs that depend on this configuration.</p>
				<p>Are you sure?</p>

				<form data-c8o-call="lib_APIStore.Admin_deleteConfig" data-c8o-listen="lib_APIStore.Admin_deleteConfig">
					<input type="hidden" name="confirmed" value="true">
					<input type="hidden" name="_id" value="__=config > _id__">

					<input type="submit" value="Delete Configuration">
				</form>
			</div>
		</div>

		<div data-role="page" id="deleteEndPointConfirmation" data-dialog="true">
			<div data-role="header">
				<h1>Delete EndPoint</h1>
			</div>

			<div data-role="content" class="ui-content">
				<p>
					Deleting an endpoint cannot be undone.<br>
					This will also cause APIs that have no other endpoint than this one to be unpublished.
				</p>
				<p>Are you sure?</p>

				<form data-c8o-call="lib_APIStore.Admin_deleteEndPoint" data-c8o-listen="lib_APIStore.Admin_deleteEndPoint">
					<input type="hidden" name="confirmed" value="true">
					<input type="hidden" name="_id" value="__=endpoint > _id__">

					<input type="submit" value="Delete EndPoint">
				</form>
			</div>
		</div>

		<div data-role="page" id="deleteUserConfirmation" data-dialog="true">
			<div data-role="header">
				<h1>Delete User</h1>
			</div>

			<div data-role="content" class="ui-content">
				<p>Deleting a user's account cannot be undone.</p>
				<p>Are you sure?</p>

				<form data-c8o-call="lib_APIStore.Admin_deleteUser" data-c8o-listen="lib_APIStore.Admin_deleteUser">
					<input type="hidden" name="confirmed" value="true">
					<input type="hidden" name="_id" value="__=user > _id__">

					<input type="submit" value="Delete Account">
				</form>
			</div>
		</div>

		<!--
        	PhoneGap JS library
        	===================
        	To use some phonegap/cordova APIs (GPS, Sensors, Camera, Etc..)
        -->
<!--         <script src="cordova.js" type="text/javascript"></script> -->

		<script src="../../../../scripts/jquery2.js"></script>

		<!-- Configure JQuery Mobile (needs to be between JQuery and JQuery Mobile) -->
		<script type="text/javascript">
		$(document).on("mobileinit", function(){
			// Configure default transition to none to avoid the fade effect
			$.mobile.defaultPageTransition  = "none";
			// Use custom JQuery select menus
			$.mobile.selectmenu.prototype.options.nativeMenu = false;

			// Disable swiping: prevents selecting text on desktop
	//			$.event.special.swipe.eventInProgress = true;
		});
		</script>

		<!--
			Convertigo jQuery c8o mobilelib
			===============================
			The following links will reference the Convertigo libraries: Convertigo core library, Convertigo jQuery Mobile dedicated library, 
			Convertigo Templating Framework library (core and jQuery Mobile dedicated).  
			They provide your application's access to the Convertigo Server, automatic call of Convertigo Server and response management. 
			Be sure all the links remain placed in the original inclusion order.
			
			You can find documentation about Convertigo Templating Framework here:
			http://www.convertigo.com/document/latest/reference-manual/convertigo-templating-framework/
			
			You can find documentation about Convertigo Internationalization Framework here:
			http://www.convertigo.com/document/latest/reference-manual/internationalization-framework/
			
			You can find documentation about Convertigo FullSync Framework here:
			http://www.convertigo.com/document/latest/reference-manual/convertigo-full-sync-architecture/interacting-locally-with-the-data/
			
			You also find below the link to Convertigo Cordova enablement library. This library's inclusion is commented but you can comment it out as soon as you need to use Push functionality.
			You can find documentation about Push management in our technical blog: http://www.convertigo.com/en/how-to/technical-blog.html
			
		-->
		<script src="../../../../scripts/c8o.core.js" type="text/javascript"></script>
		<script src="../../../../scripts/pouchdb.min.js" type="text/javascript"></script>		
		<script src="../../../../scripts/c8o.fullsync.js" type="text/javascript"></script>
		<script src="../../../../scripts/c8o.jquerymobile.js" type="text/javascript"></script>
		<script src="../../../../scripts/c8o.cordova.device.js" type="text/javascript"></script>
		<script src="../../../../scripts/ctf.core.js" type="text/javascript"></script>
		<script src="../../../../scripts/ctf.jquerymobile.js" type="text/javascript"></script>

		<!--
			Local project custom script
			===================================
			custom.js will hold all your custom logic and controller.
			WARNING : Be sure this link is placed between the Convertigo jQuery Mobile dedicated library and the "jQuery Mobile" library.  
		-->
		<script src="js/imgUpload.js" type="text/javascript"></script>
		<script src="js/session.js" type="text/javascript"></script>
		<script src="js/afterRenderingFunctions.js" type="text/javascript"></script>
		<script src="js/beforeRenderingFunctions.js" type="text/javascript"></script>
		<script src="js/custom.js" type="text/javascript"></script>
		<script src="js/customEvents.js" type="text/javascript"></script>

		<script src="js/jquery-ui.min.js"></script>
		<script src="../../../../scripts/jquery.mobile.js"></script>

		<!--
			 Material Design from nativeDroid2
			 see http://nativedroid.godesign.ch
		 -->
		<script src="vendor/waves/waves.min.js"></script>
		<script src="vendor/wow/wow.min.js"></script>
		<script src="js/nativedroid2.js"></script>
		<script src="nd2settings.js"></script>

		<script>
		$(document).tooltip({
			position: {					// Position...
				my: "left top",			// ...the top left corner of the tooltip at... 
				at: "left bottom+10px",	// ...the bottom left of target
				collision: "fit"		// Shift the tooltip when it can't fit
			},
			items: "[title], [data-custom-tooltip]",
			content: function() {
				var $el = $(this);

				var title = $el.attr("title");
				if (title)
					return title;

				var tooltip_name = $el.attr("data-custom-tooltip");

				switch (tooltip_name) {
				case "config-visibility":
					return	'<div style="text-align: left;">' +
								"<b>Public</b>: The API will be visible to everyone.<br>" +
								"<b>Internal</b>: The API will only be visible to logged in users." +
							"</div>";

				case "endpoint-type":
					return	'<div style="text-align: left;">' +
								"<b>Standard</b>: The endpoint will be used by default.<br>" +
								"<b>Backup</b>: The endpoint will be used when others are not available." +
							"</div>";

				default:
					C8O.log.warn("Unknown data-custom-tooltip: " + tooltip_name)
					return null;
				}
			}
		});

		$(document).one("nd2includesready", function(e) {
			// The current page is app.html
			var backBtn = $(e.target).find('.ui-header > div:last-child a:nth-child(1)');

			backBtn.hide();

			// Once we have naviguated to another page, the back button becomes useful.
			$(document).one("pagechange", function() {
				backBtn.show();
			});
		});
		</script>
	</body>
</html>
